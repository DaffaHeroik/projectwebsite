<!doctype html>
<html lang="id">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Toko Contoh - Home, Produk, Tentang, Kontak</title>
    <style>
        :root{
            --bg:#f6f7fb; --card:#fff; --muted:#666; --accent:#2b6cb0;
        }
        *{box-sizing:border-box}
        body{
            margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
            background:var(--bg);color:#111;
        }
        header{
            background:#fff;border-bottom:1px solid #e6e9ef;
            padding:14px 18px;display:flex;align-items:center;gap:16px;position:sticky;top:0;z-index:10;
        }
        .brand{font-weight:700;color:var(--accent)}
        nav{display:flex;gap:12px;margin-left:12px}
        nav a{color:var(--muted);text-decoration:none;padding:8px;border-radius:6px}
        nav a.active{background:#eef6ff;color:var(--accent);font-weight:600}
        nav a:hover{background:#f1f5f9;color:#111}
        .search{margin-left:auto;display:flex;gap:8px;align-items:center}
        .search input{padding:8px 10px;border:1px solid #dbe2ee;border-radius:8px;min-width:180px}
        .container{max-width:1100px;margin:20px auto;padding:0 16px;display:grid;grid-template-columns:220px 1fr;gap:18px}
        .sidebar{background:var(--card);border:1px solid #e6e9ef;padding:12px;border-radius:8px;height:fit-content}
        .categories h3{margin:0 0 8px 0;font-size:14px;color:var(--muted)}
        .category-list{display:flex;flex-direction:column;gap:6px}
        .category-list button{
            text-align:left;padding:8px;border-radius:6px;border:1px solid transparent;background:transparent;color:var(--muted);cursor:pointer;
        }
        .category-list button.active{background:#eef6ff;border-color:#d0e7ff;color:var(--accent);font-weight:600}
        .main{display:flex;flex-direction:column;gap:12px}
        .toolbar{display:flex;justify-content:space-between;align-items:center;gap:8px}
        .sort{display:flex;gap:8px;align-items:center}
        .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px;margin-top:6px}
        .card{background:var(--card);border:1px solid #e6e9ef;padding:12px;border-radius:10px;display:flex;flex-direction:column;gap:8px}
        .thumb{height:140px;border-radius:8px;background:#f3f6fb;display:flex;align-items:center;justify-content:center;color:#9aa6be;font-weight:700}
        .title{font-size:15px;margin:0;color:#0f1724}
        .price{color:var(--accent);font-weight:700}
        .meta{display:flex;justify-content:space-between;align-items:center;gap:8px;font-size:13px;color:var(--muted)}
        button.btn{padding:8px 10px;border-radius:8px;border:0;background:var(--accent);color:#fff;cursor:pointer}
        button.ghost{background:transparent;border:1px solid #e6e9ef;color:var(--muted)}
        footer{max-width:1100px;margin:28px auto;padding:12px 16px;color:var(--muted);font-size:13px}

        /* Pages */
        .page{display:none}
        .page.active{display:block}

        /* Home hero */
        .hero{background:linear-gradient(90deg,#eaf4ff,#fff);padding:28px;border-radius:10px;margin-bottom:12px;border:1px solid #e6f0ff}
        .hero h1{margin:0 0 8px 0}
        .hero p{margin:0;color:var(--muted)}

        /* Contact form */
        .form-row{display:flex;gap:8px}
        .form-row input,.form-row textarea{flex:1;padding:10px;border-radius:8px;border:1px solid #e6e9ef}
        .message{margin-top:8px;padding:10px;border-radius:8px;background:#f8fafc;border:1px solid #eef2ff;color:var(--muted)}

        @media (max-width:800px){
            .container{grid-template-columns:1fr;padding:10px}
            .sidebar{order:2}
        }
    </style>
</head>
<body>
    <header>
        <div class="brand">Toko Contoh</div>
        <nav id="mainNav">
            <a href="#" data-link="home" class="active">Beranda</a>
            <a href="#" data-link="products">Produk</a>
            <a href="#" data-link="about">Tentang</a>
            <a href="#" data-link="contact">Kontak</a>
        </nav>

        <div class="search">
            <input id="search" placeholder="Cari produk..." aria-label="Cari produk" />
            <button id="clear" class="ghost">Bersihkan</button>
        </div>
    </header>

    <main class="container">
        <aside class="sidebar" id="sidebar">
            <div class="categories">
                <h3>Kategori</h3>
                <div class="category-list" id="categoryList"></div>
            </div>

            <hr style="margin:12px 0;border:none;border-top:1px solid #f1f3f6" />
            <div>
                <h3 style="margin:0 0 8px 0;font-size:14px;color:var(--muted)">Filter Harga</h3>
                <div style="display:flex;gap:8px">
                    <input id="minPrice" type="number" placeholder="Min" style="flex:1;padding:8px;border-radius:6px;border:1px solid #e6e9ef" />
                    <input id="maxPrice" type="number" placeholder="Max" style="flex:1;padding:8px;border-radius:6px;border:1px solid #e6e9ef" />
                </div>
                <div style="margin-top:8px;display:flex;gap:8px">
                    <button id="applyPrice" class="btn">Terapkan</button>
                    <button id="clearPrice" class="ghost">Reset</button>
                </div>
            </div>
        </aside>

        <section class="main">
            <!-- Home Page -->
            <div id="page-home" class="page active">
                <div class="hero">
                    <h1>Selamat datang di Toko Contoh</h1>
                    <p>Temukan pulsa, voucher game, paket data, dan token listrik dengan mudah. Gunakan pencarian atau jelajahi kategori.</p>
                </div>

                <h3 style="margin:0 0 8px 0;color:var(--muted)">Produk Unggulan</h3>
                <div class="grid" id="featuredGrid">
                    <!-- featured injected -->
                </div>
            </div>

            <!-- Products Page -->
            <div id="page-products" class="page">
                <div class="toolbar">
                    <div><strong id="resultCount">0</strong> produk ditemukan</div>
                    <div class="sort">
                        <label for="sortSelect" style="color:var(--muted)">Urutkan:</label>
                        <select id="sortSelect" style="padding:8px;border-radius:8px;border:1px solid #e6e9ef">
                            <option value="featured">Rekomendasi</option>
                            <option value="price-asc">Harga: Rendah ke Tinggi</option>
                            <option value="price-desc">Harga: Tinggi ke Rendah</option>
                            <option value="name-asc">Nama A–Z</option>
                        </select>
                    </div>
                </div>

                <div class="grid" id="productGrid"></div>
            </div>

            <!-- About Page -->
            <div id="page-about" class="page">
                <h2>Tentang Kami</h2>
                <p style="color:var(--muted)">Toko Contoh adalah demo frontend untuk menunjukkan halaman produk, kategori, pencarian, dan kontak.</p>

                <div style="margin-top:12px;background:var(--card);padding:12px;border-radius:8px;border:1px solid #e6e9ef">
                    <h4 style="margin:0 0 6px 0">Visi</h4>
                    <p style="margin:0;color:var(--muted)">Memberi pengalaman sederhana untuk membeli produk digital.</p>
                </div>
            </div>

            <!-- Contact Page -->
            <div id="page-contact" class="page">
                <h2>Kontak</h2>
                <p style="color:var(--muted)">Hubungi kami dengan mengisi formulir di bawah.</p>

                <form id="contactForm" style="margin-top:12px;display:flex;flex-direction:column;gap:8px;max-width:640px">
                    <input id="contactName" type="text" placeholder="Nama" required style="padding:10px;border-radius:8px;border:1px solid #e6e9ef" />
                    <input id="contactEmail" type="email" placeholder="Email" required style="padding:10px;border-radius:8px;border:1px solid #e6e9ef" />
                    <textarea id="contactMessage" rows="6" placeholder="Pesan" required style="padding:10px;border-radius:8px;border:1px solid #e6e9ef"></textarea>
                    <div style="display:flex;gap:8px">
                        <button type="submit" class="btn">Kirim</button>
                        <button type="button" id="contactReset" class="ghost">Reset</button>
                    </div>
                    <div id="contactFeedback" role="status" aria-live="polite"></div>
                </form>
            </div>
        </section>
    </main>

    <footer>
        Copyright © 2025 Toko Contoh. Demo frontend sederhana.
    </footer>

    <script>
        // Data
        const PRODUCTS = [
            {id:1,name:"Pulsa 10k",price:10000,category:"Pulsa",desc:"Pulsa untuk semua operator"},
            {id:2,name:"Voucher Game 50k",price:50000,category:"Voucher",desc:"Voucher game populer"},
            {id:3,name:"Data 5GB",price:25000,category:"Paket Data",desc:"Paket internet 5GB aktif 30 hari"},
            {id:4,name:"Token Listrik 20k",price:20000,category:"Token Listrik",desc:"Pulsa listrik PLN"},
            {id:5,name:"Pulsa 50k",price:50000,category:"Pulsa",desc:"Pulsa all operator"},
            {id:6,name:"Voucher Steam 100k",price:100000,category:"Voucher",desc:"Voucher untuk Steam Wallet"},
            {id:7,name:"Paket 10GB",price:40000,category:"Paket Data",desc:"Paket 10GB valid 30 hari"},
            {id:8,name:"Token Listrik 100k",price:100000,category:"Token Listrik",desc:"Token PLN untuk rumah"},
        ];

        // State
        let state = {
            q: '',
            category: 'Semua',
            minPrice: null,
            maxPrice: null,
            sort: 'featured',
            page: 'home'
        };

        // Elements
        const nav = document.getElementById('mainNav');
        const pages = { home:document.getElementById('page-home'), products:document.getElementById('page-products'), about:document.getElementById('page-about'), contact:document.getElementById('page-contact') };
        const sidebar = document.getElementById('sidebar');
        const searchInput = document.getElementById('search');
        const clearBtn = document.getElementById('clear');
        const categoryList = document.getElementById('categoryList');
        const productGrid = document.getElementById('productGrid');
        const featuredGrid = document.getElementById('featuredGrid');
        const resultCount = document.getElementById('resultCount');
        const sortSelect = document.getElementById('sortSelect');
        const minPriceEl = document.getElementById('minPrice');
        const maxPriceEl = document.getElementById('maxPrice');
        const applyPrice = document.getElementById('applyPrice');
        const clearPrice = document.getElementById('clearPrice');

        // Contact form
        const contactForm = document.getElementById('contactForm');
        const contactFeedback = document.getElementById('contactFeedback');
        const contactReset = document.getElementById('contactReset');

        // Helpers
        function getCategories(){
            const set = new Set(PRODUCTS.map(p => p.category));
            return ['Semua', ...Array.from(set)];
        }
        function formatRupiah(v){
            return 'Rp ' + v.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
        }

        // Navigation
        nav.addEventListener('click', (e) => {
            const a = e.target.closest('a[data-link]');
            if(!a) return;
            e.preventDefault();
            const link = a.getAttribute('data-link');
            showPage(link);
        });

        function setActiveNav(link){
            nav.querySelectorAll('a[data-link]').forEach(a => {
                a.classList.toggle('active', a.getAttribute('data-link')===link);
            });
        }

        function showPage(name){
            state.page = name;
            Object.keys(pages).forEach(k => pages[k].classList.toggle('active', k===name));
            setActiveNav(name);
            // Sidebar only visible on products
            sidebar.style.display = (name==='products') ? 'block' : 'none';
            // render relevant content
            if(name === 'products') renderProducts();
            if(name === 'home') renderFeatured();
        }

        // Categories
        function renderCategories(){
            const cats = getCategories();
            categoryList.innerHTML = '';
            cats.forEach(cat => {
                const btn = document.createElement('button');
                btn.textContent = cat;
                btn.className = (cat === state.category) ? 'active' : '';
                btn.onclick = () => {
                    state.category = cat;
                    renderCategories();
                    renderProducts();
                };
                categoryList.appendChild(btn);
            });
        }

        // Product rendering and filtering
        function filteredList(){
            return PRODUCTS.filter(p => {
                if (state.category !== 'Semua' && p.category !== state.category) return false;
                if (state.q && !p.name.toLowerCase().includes(state.q.toLowerCase()) && !p.desc.toLowerCase().includes(state.q.toLowerCase())) return false;
                if (state.minPrice != null && p.price < state.minPrice) return false;
                if (state.maxPrice != null && p.price > state.maxPrice) return false;
                return true;
            });
        }

        function renderProducts(){
            // apply sort
            let list = filteredList().slice();
            if(state.sort === 'price-asc') list.sort((a,b)=>a.price-b.price);
            else if(state.sort === 'price-desc') list.sort((a,b)=>b.price-a.price);
            else if(state.sort === 'name-asc') list.sort((a,b)=>a.name.localeCompare(b.name));

            resultCount.textContent = list.length;
            productGrid.innerHTML = '';
            if(list.length === 0){
                productGrid.innerHTML = '<div style="grid-column:1/-1;padding:20px;background:#fff;border-radius:8px;border:1px solid #e6e9ef;color:var(--muted)">Tidak ada produk.</div>';
                return;
            }
            list.forEach(p => {
                const card = document.createElement('article');
                card.className = 'card';
                card.innerHTML = `
                    <div class="thumb">${p.category}</div>
                    <div style="display:flex;flex-direction:column;gap:6px">
                        <h4 class="title">${p.name}</h4>
                        <div class="meta"><span class="price">${formatRupiah(p.price)}</span><span style="font-size:13px;color:var(--muted)">${p.category}</span></div>
                        <p style="margin:0;color:var(--muted);font-size:13px">${p.desc}</p>
                        <div style="display:flex;gap:8px;margin-top:8px">
                            <button class="btn" data-id="${p.id}">Beli</button>
                            <button class="ghost" data-id="${p.id}">Detail</button>
                        </div>
                    </div>
                `;
                productGrid.appendChild(card);

                // API endpoint - override by setting window.PRODUCT_API_URL before render if needed
                const API_URL = window.PRODUCT_API_URL || 'https://api.example.com/products';

                // helper to call API
                async function callApi(path, opts = {}) {
                    try {
                        const res = await fetch(path, opts);
                        const json = await res.json().catch(() => null);
                        if (!res.ok) throw new Error((json && json.message) || res.statusText || 'Request failed');
                        return json;
                    } catch (err) {
                        console.error('API error', err);
                        throw err;
                    }
                }

                // Buy button
                const buyBtn = card.querySelector('button.btn[data-id]');
                if (buyBtn) {
                    buyBtn.addEventListener('click', async (ev) => {
                        ev.preventDefault();
                        buyBtn.disabled = true;
                        try {
                            const url = `${API_URL}/${p.id}/purchase`; // POST to purchase endpoint
                            const payload = { id: p.id, name: p.name, price: p.price };
                            const result = await callApi(url, {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify(payload)
                            });
                            // simple feedback - adapt as needed
                            alert(result && result.message ? result.message : 'Pembelian berhasil');
                        } catch (err) {
                            alert('Gagal melakukan request. Cek console untuk detail.');
                        } finally {
                            buyBtn.disabled = false;
                        }
                    });
                }

                // Detail button
                const detailBtn = card.querySelector('button.ghost[data-id]');
                if (detailBtn) {
                    detailBtn.addEventListener('click', async (ev) => {
                        ev.preventDefault();
                        detailBtn.disabled = true;
                        try {
                            const url = `${API_URL}/${p.id}`; // GET product detail
                            const result = await callApi(url, { method: 'GET' });
                            // minimal detail view - replace with modal as desired
                            const info = result && typeof result === 'object' ? JSON.stringify(result, null, 2) : String(result);
                            alert('Detail produk:\n' + info);
                        } catch (err) {
                            alert('Gagal memuat detail. Cek console untuk detail.');
                        } finally {
                            detailBtn.disabled = false;
                        }
                    });
                }

                // Optional: make whole card clickable to open detail (uncomment if desired)
                // card.addEventListener('click', () => {
                //     if (state.page !== 'products') showPage('products');
                //     // navigate or fetch detail...
                // });
            });
        }

        // Featured for home
        function renderFeatured(){
            featuredGrid.innerHTML = '';
            const featured = PRODUCTS.slice(0,4);
            featured.forEach(p => {
                const card = document.createElement('article');
                card.className = 'card';
                card.innerHTML = `
                    <div class="thumb">${p.category}</div>
                    <div style="display:flex;flex-direction:column;gap:6px">
                        <h4 class="title">${p.name}</h4>
                        <div class="meta"><span class="price">${formatRupiah(p.price)}</span><span style="font-size:13px;color:var(--muted)">${p.category}</span></div>
                    </div>
                `;
                featuredGrid.appendChild(card);
            });
        }

        // Events: search, sort, price filter, clear
        searchInput.addEventListener('input', e => {
            state.q = e.target.value.trim();
            // if not on products, navigate to products
            if(state.page !== 'products') showPage('products');
            renderProducts();
        });
        clearBtn.addEventListener('click', () => {
            searchInput.value = '';
            state.q = '';
            if(state.page !== 'products') showPage('products');
            renderProducts();
        });
        sortSelect.addEventListener('change', e => {
            state.sort = e.target.value;
            renderProducts();
        });
        applyPrice.addEventListener('click', () => {
            const min = parseInt(minPriceEl.value);
            const max = parseInt(maxPriceEl.value);
            state.minPrice = Number.isFinite(min) ? min : null;
            state.maxPrice = Number.isFinite(max) ? max : null;
            if(state.page !== 'products') showPage('products');
            renderProducts();
        });
        clearPrice.addEventListener('click', () => {
            minPriceEl.value = '';
            maxPriceEl.value = '';
            state.minPrice = null;
            state.maxPrice = null;
            renderProducts();
        });

        // Contact form handling (demo)
        contactForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('contactName').value.trim();
            const email = document.getElementById('contactEmail').value.trim();
            const msg = document.getElementById('contactMessage').value.trim();
            if(!name || !email || !msg){
                contactFeedback.textContent = 'Silakan isi semua field.';
                contactFeedback.className = 'message';
                return;
            }
            contactFeedback.textContent = 'Pesan terkirim. Terima kasih!';
            contactFeedback.className = 'message';
            contactForm.reset();
        });
        contactReset.addEventListener('click', () => {
            contactForm.reset();
            contactFeedback.textContent = '';
        });

        // Initial render
        renderCategories();
        renderFeatured();
        renderProducts();
        // ensure correct sidebar visibility on load
        sidebar.style.display = (state.page==='products') ? 'block' : 'none';
    </script>
</body>
</html>
